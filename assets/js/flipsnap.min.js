(function(k,t,i){var r=t.createElement("div");var u=["webkit","moz","o","ms"];var y={};var p=b.support={};var A=false;var d=5;var j=55;p.transform3d=B(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);p.transform=B(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"]);p.transition=B(["transitionProperty","WebkitTransitionProperty","MozTransitionProperty","OTransitionProperty","msTransitionProperty"]);p.srcset=typeof new Image().srcset!="undefined";p.addEventListener="addEventListener" in k;p.mspointer=k.navigator.msPointerEnabled;p.cssAnimation=p.transform3d&&p.transition;var f=k.requestAnimationFrame;for(var n=0;n<u.length&&!f;++n){f=k[u[n]+"RequestAnimationFrame"]}if(!f){f=function(x){x()}}var l=["touch","mouse"];var a={start:{touch:"touchstart",mouse:"mousedown"},move:{touch:"touchmove",mouse:"mousemove"},end:{touch:"touchend",mouse:"mouseup"}};if(p.addEventListener){t.addEventListener("gesturestart",function(){A=true});t.addEventListener("gestureend",function(){A=false})}function b(x,E){return(this instanceof b)?this.init(x,E):new b(x,E)}b.prototype.init=function(E,F){var x=this;x.element=E;if(typeof E==="string"){x.element=t.querySelector(E)}if(!x.element){throw new Error("element not found")}if(p.mspointer){x.element.style.msTouchAction="pan-y"}F=x.opts=F||{};x.distance=i;x.disableTouch=(F.disableTouch===i)?false:F.disableTouch;x.disableCssTransition=(F.disableCssTransition===i)?false:F.disableCssTransition;x.disable3d=(F.disable3d===i)?false:F.disable3d;x.transitionDuration=(F.transitionDuration===i)?350:F.transitionDuration;x.loop=!!F.loop;x.autoPlayDuration=isNaN(F.autoPlayDuration)?4000:Number(F.autoPlayDuration);x.enableAutoPlay=(F.enableAutoPlay===i)?false:F.enableAutoPlay;x.itemWidth=isNaN(F.itemWidth)?null:Number(F.itemWidth);x.currentPoint=0;x._currentPoint=0;x.maxPoint=i;x._maxPoint=i;x.currentX=0;x.animation=false;x.use3d=p.transform3d;if(x.disable3d===true){x.use3d=false}if(p.cssAnimation){x._setStyle({transitionProperty:z("transform"),transitionTimingFunction:"cubic-bezier(0,0,0.5,1)",transitionDuration:"0ms",transform:x._getTranslate(0)})}else{x._setStyle({position:"relative",left:"0px"})}x.refresh();l.forEach(function(G){x.element.addEventListener(a.start[G],x,false)});return x};b.prototype.handleEvent=function(E){var x=this;switch(E.type){case a.start.touch:x._touchStart(E,"touch");break;case a.start.mouse:x._touchStart(E,"mouse");break;case a.move.touch:x._touchMove(E,"touch");break;case a.move.mouse:x._touchMove(E,"mouse");break;case a.end.touch:x._touchEnd(E,"touch");break;case a.end.mouse:x._touchEnd(E,"mouse");break;case"click":x._click(E);break}};b.prototype.refresh=function(){var F=this;F.pauseAutoPlay();if(F.firstLoopFaker){F.element.removeChild(F.firstLoopFaker);F.firstLoopFaker=null}if(F.lastLoopFaker){F.element.removeChild(F.lastLoopFaker);F.lastLoopFaker=null}var E=F.items=(function(){var P=F.element.childNodes,N=0,L=P.length,O,M=[];for(;N<L;N++){O=P[N];if(O.nodeType===1){M.push(O)}}return M})();F.itemLength=F._itemLength=E.length;F.maxPoint=F._maxPoint=(F.opts.maxPoint===i)?F._itemLength-1:F.opts.maxPoint;if(F.loop){var J=F.element.firstElementChild;var I=F.element.lastElementChild;F.firstLoopFaker=J.cloneNode(true);F.lastLoopFaker=I.cloneNode(true);F.element.appendChild(F.firstLoopFaker);F.element.insertBefore(F.lastLoopFaker,F.element.firstElementChild);F._itemLength=F._itemLength===0?0:(F._itemLength+2);F._maxPoint=F._maxPoint<0?F._maxPoint:(F._maxPoint+2);E.push(F.firstLoopFaker);E.unshift(F.lastLoopFaker)}F.scrollWidth=E.length<1?0:F._itemLength*(F.itemWidth||h(E[0]));F.element.style.width=F.scrollWidth+"px";F.updateDistance();var G=F.itemImgs=[];for(var H=0,x=E.length;H<x;H++){var K=E[H].getElementsByTagName("img");G[H]=D(K)}F._maxX=-F._distance*F._maxPoint;F.moveToPoint(F.currentPoint||0,0);if(F.isAutoPlayEnable()){F.resumeAutoPlay()}};b.prototype.updateDistance=function(){var x=this;if(x.opts.distance===i){if(x._maxPoint<0){x._distance=0}else{x._distance=x.scrollWidth/(x._maxPoint+1)}}else{x._distance=x.opts.distance}};b.prototype.hasNext=function(){return this.loop?true:this.currentPoint<this.maxPoint};b.prototype.hasPrev=function(){return this.loop?true:this.currentPoint>0};b.prototype.toNext=function(x){var E=this;if(!E.hasNext()){return}if(E.loop&&E.currentPoint>=E.maxPoint){E.animation=false;E._setStyle({transitionDuration:"0ms"});setTimeout(function(){E._setX(0,0);setTimeout(function(){E.moveToPoint(0,x)},10)},10)}else{E.moveToPoint(E.currentPoint+1,x)}};b.prototype.toPrev=function(x){var E=this;if(!E.hasPrev()){return}if(E.loop&&E.currentPoint===0){E.animation=false;E._setStyle({transitionDuration:"0ms"});setTimeout(function(){E._setX(E._maxX,0);setTimeout(function(){E.moveToPoint(E.maxPoint,x)},10)},10)}else{E.moveToPoint(E.currentPoint-1,x)}};b.prototype._realPointToUserPoint=function(x){return this.loop?(x<1?self.maxPoint:(x-1)):x};b.prototype._userPointToRealPoint=function(x){return this.loop?x+1:x};b.prototype.moveToPoint=function(E,x,F){var G=this;var H;if(E===i){E=G.currentPoint}else{if(E<0||isNaN(E)){E=0}else{if(E>G.maxPoint){E=G.maxPoint}}}G._moveToPoint(G.loop?E+1:E,x,F)};b.prototype._moveToPoint=function(L,x,H){var K=this;clearTimeout(K._moveendTimeout);clearTimeout(K._autoPlayTimeout);var J=K._realPointToUserPoint(L);var E=K.currentPoint;var G=K._currentPoint;if(!H){K._triggerEvent("fsmovestart",true,false);K.showItemLazyImgs(J)}x=x===i?K.transitionDuration:x;K.currentPoint=J;K._currentPoint=L;var F={moved:E!==K.currentPoint,originalPoint:E,newPoint:K.currentPoint};var I=function(){K._triggerEvent("fsmoveend",true,false,F);if(K.isAutoPlayEnable()){K.resumeAutoPlay()}if(H){K.showItemLazyImgs(J)}var M=(J+1)%K.itemLength;setTimeout(function(){K.nextImgLazyDfd=K.loadItemLazyImgs(M,function(){K.showItemLazyImgs(M)})},100/6)};if(p.cssAnimation&&!K.disableCssTransition){K._setStyle({transitionDuration:x+"ms"});K._moveendTimeout=setTimeout(I,x)}else{if(x!==0){K.animation=true}}K._setX(-K._currentPoint*K._distance,x,I);if(F.moved){K._triggerEvent("fspointmove",true,false,F)}};b.prototype._setX=function(F,E,H){var G=this;if(G.animation){if(p.cssAnimation&&!G.disableCssTransition){G.element.style[y.transform]=G._getTranslate(F);G.currentX=F}else{G._animate(F,E||G.transitionDuration,H)}}else{if(p.cssAnimation){G.element.style[y.transform]=G._getTranslate(F)}else{G.element.style.left=F+"px"}G.currentX=F}};b.prototype._touchStart=function(G,F){var x=this;if(x.disableTouch||x.scrolling||A){return}clearInterval(x._animateTimer);clearTimeout(x._moveendTimeout);x.pauseAutoPlay();if(x.nextImgLazyDfd){x.nextImgLazyDfd.reject()}x.element.addEventListener(a.move[F],x,false);t.addEventListener(a.end[F],x,false);var E=G.target.tagName;if(F==="mouse"&&E!=="SELECT"&&E!=="INPUT"&&E!=="TEXTAREA"&&E!=="BUTTON"){G.preventDefault()}if(p.cssAnimation){x._setStyle({transitionDuration:"0ms"})}x.animation=false;x.scrolling=true;x.moveReady=false;x.startPageX=w(G,"pageX");x.startPageY=w(G,"pageY");x.basePageX=x.startPageX;x.directionX=0;x.startTime=G.timeStamp;x._triggerEvent("fstouchstart",true,false);x.showItemLazyImgs((x.currentPoint+1)%x.itemLength);if(x.loop){x.showItemLazyImgs((x.itemLength+x.currentPoint-1)%x.itemLength)}};b.prototype._touchMove=function(E,K){var O=this;if(!O.scrolling||A){return}var H=w(E,"pageX");var G=w(E,"pageY");var L;var x;var M;if(O.moveReady){E.preventDefault();L=H-O.basePageX;x=O.currentX+L;if(x>=0||x<O._maxX){x=Math.round(O.currentX+L/3)}M=O.directionX=L===0?O.directionX:L>0?-1:1;if(O.loop){var J=-1*O._distance;var N=-1*O._distance*(O._itemLength-2);if(M==-1){if(O.currentX<=J&&x>J){x=O._maxX+x-J}else{if(O.currentX>J&&x>=0){x=N+x}}}else{if(M==1){if(O.currentX>=N&&x<N){x=0+x-N}else{if(O.currentX<N&&x<=O._maxX){x=J+x-O._maxX}}}}}var F=!O._triggerEvent("fstouchmove",true,true,{delta:L,direction:O.directionX});O._triggerEvent("fsmove",true,true,{absoluteX:x});if(F){O._touchAfter({moved:false,originalPoint:O.currentPoint,newPoint:O.currentPoint,cancelled:true})}else{O._setX(x)}}else{var I=m(O.startPageX,O.startPageY,H,G);if(I.z>d){if(g(I)>j){E.preventDefault();O.moveReady=true;O.element.addEventListener("click",O,true);O._triggerEvent("fsmovestart",true,false);O.loadItemLazyImgs((O.currentPoint+O.directionX)%O.itemLength)}else{O._touchAfter({moved:false,originalPoint:O.currentPoint,newPoint:O.currentPoint});if((!p.cssAnimation||O.disableCssTransition)&&-1*O.currentPoint*O._distance!=O.currentX){O.moveToPoint(i,i,true)}if(O.isAutoPlayEnable()){O.resumeAutoPlay()}}}}O.basePageX=H};b.prototype._touchEnd=function(H,G){var F=this;F.element.removeEventListener(a.move[G],F,false);t.removeEventListener(a.end[G],F,false);if(!F.scrolling){return}var E=-F.currentX/F._distance;var x;E=(F.directionX>0)?Math.ceil(E):(F.directionX<0)?Math.floor(E):Math.round(E);if(E<0){E=0}else{if(E>F._maxPoint){E=F._maxPoint}}x=F._realPointToUserPoint(E);F._touchAfter({moved:x!==F.currentPoint,originalPoint:F.currentPoint,newPoint:x,cancelled:false});F._moveToPoint(E,i,true)};b.prototype._click=function(E){var x=this;E.stopPropagation();E.preventDefault()};b.prototype._touchAfter=function(E){var x=this;x.scrolling=false;x.moveReady=false;setTimeout(function(){x.element.removeEventListener("click",x,true)},200);x._triggerEvent("fstouchend",true,false,E)};b.prototype.isAutoPlayEnable=function(){return this.enableAutoPlay&&this.itemLength>1};b.prototype.autoPlay=function(){this.enableAutoPlay=true;return this.resumeAutoPlay()};b.prototype.cancleAutoPlay=function(){this.enableAutoPlay=false;return this.pauseAutoPlay()};b.prototype.pauseAutoPlay=function(){clearTimeout(this._autoPlayTimeout);return this};b.prototype.resumeAutoPlay=function(){var G=this;if(G.isAutoPlayEnable()){var F=(G.currentPoint+1)%G.itemLength;var E=2;var x=function(){if(--E===0){f(function(){G._autoPlayTimeout=setTimeout(function(){if(G.hasNext()){G.toNext()}else{G.moveToPoint(0)}},G.autoPlayDuration/3)})}};if(G.nextImgLazyDfd){G.nextImgLazyDfd.always(x)}else{x()}clearTimeout(G._autoPlayTimeout);G._autoPlayTimeout=setTimeout(x,G.autoPlayDuration*2/3)}return this};b.prototype._setStyle=function(F){var x=this;var E=x.element.style;for(var G in F){e(E,G,F[G])}};b.prototype._animate=function(J,H,M){var N=this;var F=N.element;var E=+new Date();var K=N.currentX;var L=J;var G=H;var I=function(O,x){return -(O/=x)*(O-2)};N._animateTimer=setInterval(function(){var O=new Date()-E;var P,x;if(O>G){clearInterval(N._animateTimer);x=L;setTimeout(function(){if(typeof M=="function"){M()}},100/6)}else{P=I(O,G);x=P*(L-K)+K}if(p.cssAnimation){e(F.style,"transform",N._getTranslate(x))}else{F.style.left=x+"px"}N.currentX=x;N._triggerEvent("fsmove",true,true,{absoluteX:x})},100/6)};b.prototype.destroy=function(){var x=this;l.forEach(function(E){x.element.removeEventListener(a.start[E],x,false)})};b.prototype._getTranslate=function(E){var F=this;return F.use3d?"translate3d("+E+"px, 0, 0)":"translate("+E+"px, 0)"};b.prototype._triggerEvent=function(G,E,x,I){var F=this;var H=t.createEvent("Event");H.initEvent(G,E,x);if(I){for(var J in I){if(I.hasOwnProperty(J)){H[J]=I[J]}}}return F.element.dispatchEvent(H)};function w(x,E){return x.changedTouches?x.changedTouches[0][E]:x[E]}function B(x){return q(x,function(E){return r.style[E]!==i})}function e(E,G,F){var x=y[G];if(x){E[x]=F}else{if(E[G]!==i){y[G]=G;E[G]=F}else{q(u,function(H){var I=c(H)+c(G);if(E[I]!==i){y[G]=I;E[I]=F;return true}})}}}b.prototype.setStyle=e;function D(G){var F=[];for(var E=0,x=G.length;E<x;E++){if(o(G[E])){F.push(G[E])}}return F}function o(x){return !!x.getAttribute("lazy-src")}b.prototype.showItemLazyImgs=function(F){var E=this;var H=E._userPointToRealPoint(F);var I=E.itemImgs[H];if(!I||!I.length){return}if(E.loop){if(F==0){I=I.concat(E.itemImgs[E._itemLength-1])}if(F==E.itemLength-1){I=I.concat(E.itemImgs[0])}}for(var G=0,x=I.length;G<x;G++){s(I[G])}};b.prototype.loadItemLazyImgs=function(G,I){var K=this;var H=K._userPointToRealPoint(G);var F=K.itemImgs[H];if(!F||!F.length){return}var L=F.length;var J={status:"padding",callbacks:[],status:function(){return status},reject:function(){this.status="fail"},always:function(M){if(typeof M=="function"){if(this.status=="success"||this.status=="fail"){M()}else{this.callbacks.push(M)}}}};J.always(I);for(var E=0,x=F.length;E<x;E++){v(F[E],function(){if(--L==0&&J.status!="fail"){J.status="success";for(var N=0,M=J.callbacks.length;N<M;N++){J.callbacks[N]()}}})}return J};function s(E){var x=E.getAttribute("lazy-src");var G=E.getAttribute("lazy-srcset");var I=E.getAttribute("seted-lazy-src");var F=p.srcset&&G;var H=F?G:x;if(H&&I!=H){E[F?"srcset":"src"]=F?G:x;E.setAttribute("seted-lazy-src",H)}}var C={};function v(F,J){var E=new Image();var x=F.getAttribute("lazy-src");var H=F.getAttribute("lazy-srcset");var G=p.srcset&&H;var I=G?H:x;if(I&&!C[I]){E.onload=E.onerror=J;E[G?"srcset":"src"]=G?H:x;C[I]=true}else{J()}}function h(E){var x=E.ownerDocument.defaultView.opener?E.ownerDocument.defaultView.getComputedStyle(E,null):k.getComputedStyle(E,null);var G=Number((x.marginLeft||x["margin-left"]||"").slice(0,-2));var F=Number((x.marginRight||x["margin-right"]||"").slice(0,-2));return E.offsetWidth+G+F}function z(E){if(r.style[E]!==i){return E}else{var x;q(u,function(F){var G=c(F)+c(E);if(r.style[G]!==i){x="-"+F+"-"+E;return true}});return x}}function c(x){return x.charAt(0).toUpperCase()+x.substr(1)}function q(F,G){for(var E=0,x=F.length;E<x;E++){if(G(F[E],E)){return true}}return false}function m(G,I,F,H){var E=Math.abs(G-F);var K=Math.abs(I-H);var J=Math.sqrt(Math.pow(E,2)+Math.pow(K,2));return{x:E,y:K,z:J}}function g(F){var E=F.y/F.z;var x=Math.acos(E);return 180/(Math.PI/x)}if(typeof exports=="object"){module.exports=b}else{if(typeof define=="function"&&define.amd){define(function(){return b})}else{k.Flipsnap=b}}})(window,window.document);